<div class="flex justify-between pl-25 pr-25 bg-secondary-50 dark:bg-dark-900">
  <h1 mat-dialog-title>
    <span class="text-secondary-900 dark:text-secondary-100">
      {{ "VENDOR.SEND_MESSAGE" | translate }}
    </span>
  </h1>

  <i class="ki-outline ki-abstract-11 text-base me-1 mr-2 text-secondary-900 dark:text-secondary-100" [mat-dialog-close]="false"></i>
</div>

<div  
    class="p-8 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900"
>
    <div class="flex items-center justify-between">
        <div class="flex items-center space-x-3">
            <div matTooltip="{{ quote.vendor.firstName }} {{ quote.vendor.lastName }}" 
                [class]="
                'w-10 h-10 chat-avatar rounded-full flex items-center justify-center text-white text-sm font-medium ' +
                mapLetterToElement(quote.vendor.firstName)
                "
            >
                {{ transform(quote.vendor.firstName) }} {{ transform(quote.vendor.lastName) }}
            </div>
            <div>
                <h2 class="font-semibold text-gray-900 dark:text-white">
                    {{ quote.title }}
                </h2>
                <p class="text-sm text-gray-500 dark:text-gray-400">
                    {{ quote.submission.title }}
                </p>
            </div>
        </div>
    </div>
</div>

<div
    class="border-t border-gray-200 dark:border-gray-700 p-4 bg-white dark:bg-gray-900 relative"
>
    <div 
    class="upload-files-panel bg-white dark:bg-gray-900"
    *ngIf="showUploadFilesPanel"
    >
    <file-pond 
        #myPond 
        [options]="pondOptions" 
        [files]="pondFiles"
        (onaddfile)="pondHandleAddFile($event)"
        (onremovefile)="onFileRemoved($event)">
    </file-pond>
    </div>
    <div class="flex items-center space-x-3">
    <svg
        (click)="toggleFileUploadPanel()"
        class="w-5 h-5 text-gray-500 dark:text-gray-400 cursor-pointer mb-2"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
    >
        <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.112 2.13"
        ></path>
    </svg>
    <div class="flex-1">
        <textarea
        placeholder="Send a message..."
        [(ngModel)]="newMessage"
        (keyup.enter)="sendMessage()"
        rows="1"
        class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 resize-none overflow-hidden min-h-[40px]"
        style="height: auto"
        cdkTextareaAutosize
        cdkAutosizeMinRows="1"
        cdkAutosizeMaxRows="10"
        ></textarea>
    </div>
    <button
        *ngIf="!sendingMessage"
        (click)="sendMessage()"
        class="p-2 pointer text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1"
    >
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
        <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path>
        </svg>
    </button>

    <div class="spinner mr-2" *ngIf="sendingMessage"></div>
    </div>
</div>
